<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationInsert">
					<xpath>Defs/ThingDef/comps/li/linkableFacilities/li[text()="Dresser"]</xpath>
					<value>
						<li>RGK_Dresser</li><!-- GloomyFurniture -->
						<li>WardrobeA</li><!-- GloomyFurniture -->
                        <li>WardrobeB</li><!-- GloomyFurniture -->
                        <li>GL_Teddy</li><!-- GloomyFurniture -->
					</value>
				</li>

				<li Class="PatchOperationInsert">
					<xpath>Defs/ThingDef/comps/li/linkableFacilities/li[text()="EndTable"]</xpath>
					<value>
						<li>RGK_EndTable</li><!-- GloomyFurniture -->
			            <li>RGK_EndTableWithLamp</li><!-- GloomyFurniture -->
			            <li>RGK_EndTableWithLampE</li><!-- GloomyFurniture -->
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- Vanilla Furniture Expanded -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
			<li>Vanilla Furniture Expanded</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "RGK_bedSingle" or defName = "RGK_bedSingleB" or defName = "RGK_bedDouble" or defName = "RGK_bedDoubleB" or defName = "GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>Table_LightEndTable</li><!-- Vanilla Furniture Expanded -->
						<li>Table_RoyalEndTable</li><!-- Vanilla Furniture Expanded -->
						<li>Table_RoyalDresser</li><!-- Vanilla Furniture Expanded -->
						<li>Table_Wardrobe</li><!-- Vanilla Furniture Expanded -->
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- Vanilla Furniture Expanded - Spacer Module -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
			<li>Vanilla Furniture Expanded</li>
			<li>Vanilla Furniture Expanded - Spacer Module</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "RGK_bedSingle" or defName = "RGK_bedSingleB" or defName = "RGK_bedDouble" or defName = "RGK_bedDoubleB" or defName = "GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>Table_IlluminatedEndTable</li><!-- Vanilla Furniture Expanded - Spacer Module -->
						<li>Table_IlluminatedDresser</li><!-- Vanilla Furniture Expanded - Spacer Module -->
					</value>
				</li>	
			</operations>
		</match>
	</Operation>

	<!-- Rim-Effect: Core -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
			<li>Rim-Effect: Core</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "RGK_bedSingle" or defName = "RGK_bedSingleB" or defName = "RGK_bedDouble" or defName = "RGK_bedDoubleB" or defName = "GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>RE_PrefabDresser</li><!-- Rim-Effect: Core -->
						<li>RE_PrefabWardrobe</li><!-- Rim-Effect: Core -->
						<li>RE_PrefabEndTable</li><!-- Rim-Effect: Core -->
						<li>RE_PrefabEndTableWithLamp</li><!-- Rim-Effect: Core -->
						<li>RE_PrefabBedsideTable</li><!-- Rim-Effect: Core -->
						<li>RE_PrefabBedsideTableLamp</li><!-- Rim-Effect: Core -->
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- Mechalit Core v2 -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
			<li>>Mechalit Core v2</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "RGK_bedSingle" or defName = "RGK_bedSingleB" or defName = "RGK_bedDouble" or defName = "RGK_bedDoubleB" or defName = "GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>EliteDresserMeh</li><!-- Mechalit Core v2 -->
					</value>
				</li>
			</operations>
		</match>
	</Operation>

	<!-- Mechalit Core v2 -->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>GloomyFurniture</li>
			<li>More Furniture</li>
		</mods>

		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "RGK_bedSingle" or defName = "RGK_bedSingleB" or defName = "RGK_bedDouble" or defName = "RGK_bedDoubleB" or defName = "GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>Anon2Dresser</li><!-- More Furniture -->
						<li>Anon2EndTable</li><!-- More Furniture -->
                        <li>Anon2EndTableLight</li><!-- More Furniture -->
			            <li>Anon2RoyalEndTable</li><!-- More Furniture -->
                        <li>Anon2RoyalEndTableLight</li><!-- More Furniture -->
					</value>
				</li>
			</operations>
		</match>
	</Operation>
</Patch>