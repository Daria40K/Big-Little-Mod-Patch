<?xml version='1.0' encoding='utf-8'?>
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>GloomyFurniture</li>
        </mods>
        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="RGK_bedSingle" or defName="RGK_bedSingleB" or defName="RGK_bedDouble" or defName="RGK_bedDoubleB" or defName="GL_ClassyDoubleBed"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="prf.materials,">PRF_QuartzPylon</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabDresser</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabEndTable</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabEndTableWithLamp</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabBedsideTable</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabBedsideTableLamp</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabWardrobe</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Dresser</li>
                        <li MayRequire="neronix17.outland.core,">Outland_EndTable</li>
                        <li MayRequire="neronix17.outland.core,">Outland_EndTableWithLamp</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Wardrobe</li>
                        <li MayRequire="solaris.furniturebase,">RGK_Dresser</li>
                        <li MayRequire="solaris.furniturebase,">RGK_EndTable</li>
                        <li MayRequire="solaris.furniturebase,">RGK_EndTableWithLamp</li>
                        <li MayRequire="solaris.furniturebase,">RGK_EndTableWithLampE</li>
                        <li MayRequire="solaris.furniturebase,">WardrobeA</li>
                        <li MayRequire="solaris.furniturebase,">WardrobeB</li>
                        <li MayRequire="solaris.furniturebase,">GL_Teddy</li>
                        <li MayRequire="tikubonn.stuffeddoll,">StuffedDollSmall</li>
                        <li MayRequire="tikubonn.stuffeddoll,">StuffedDollLarge</li>
                        <li MayRequire="allezsoyez.ttfm.tatestinyfurnituremod,">TatesTinyFurnitureMod_Dresser</li>
                        <li MayRequire="allezsoyez.ttfm.tatestinyfurnituremod,">TatesTinyFurnitureMod_BedQuiltSingle</li>
                        <li MayRequire="allezsoyez.ttfm.tatestinyfurnituremod,">TatesTinyFurnitureMod_BedQuiltDouble</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabDresser</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabEndTable</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabEndTableWithLamp</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabBedsideTable</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabBedsideTableLamp</li>
                        <li MayRequire="rimeffect.core,">RE_PrefabWardrobe</li>
                        <li MayRequire="daylight.rimlifeexfurmod,">RLE_KazariKatana</li>
                        <li MayRequire="daylight.rimlifeexfurmod,">RLE_Kouro</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeAA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeAB</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeAF</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeAC</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeBA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeBB</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeBF</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeBC</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeCA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeCB</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeCF</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeCC</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukBedroomUpgradeCD</li>
                        <li MayRequire="vanillaexpanded.vfespacer,">Table_IlluminatedEndTable</li>
                        <li MayRequire="vanillaexpanded.vfespacer,">Table_IlluminatedDresser</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Table_Wardrobe</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Table_RoyalEndTable</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Table_RoyalDresser</li>
                        <li MayRequire="mlie.morefurniture,">Anon2Dresser</li>
                        <li MayRequire="mlie.morefurniture,">Anon2EndTable</li>
                        <li MayRequire="mlie.morefurniture,">Anon2RoyalEndTable</li>
                        <li MayRequire="mlie.morefurniture,">Anon2EndTableLight</li>
                        <li MayRequire="mlie.morefurniture,">Anon2RoyalEndTableLight</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureAA</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureAB</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureAC</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureBA</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureBB</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukFurnitureBC</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Table_LightEndTable</li>
                        <li MayRequire="mlie.mechalitcorev2,">EliteDresserMeh</li>
                        <li MayRequire="twink.vaultfurniture,">VaultWardrobeA</li>
                        <li MayRequire="twink.vaultfurniture,">VaultWardrobeB</li>
                        <li MayRequire="twink.vaultfurniture,">vt_EndTable</li>
                        <li MayRequire="twink.vaultfurniture,">vt_commode</li>
                        <li MayRequire="twink.vaultfurniture,">vt_luxEndTable</li>
                        <li MayRequire="twink.vaultfurniture,">vt_luxcommode</li>
                        <li MayRequire="twink.vaultfurniture,">vt_curio</li>
                        <li MayRequire="daria40k.mightypersonabondforgepatch,">fghfghfgh</li>
                        <li MayRequire="daniledman.mechalitcore,">EliteDresserMeh</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="GL_TableButcher"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="roo.antyracemod,">AT_Chart</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_ButcherGoods</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_ButcherBoost</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="RGK_FueledStove" or defName="GL_ElectricStove"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="solaris.furniturebase,">GL_Cupboard</li>
                        <li MayRequire="solaris.furniturebase,">GL_TablewareShelf</li>
                        <li MayRequire="mrkociak.morearchotechstuffandthingsreupload,">ArchoCookingAssistant</li>
                        <li MayRequire="dismarzero.vgp.vgpgardengourmet,">CookingTools</li>
                        <li MayRequire="vanillaexpanded.vfeproduction,">VFE_KitchenSinkCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_KitchenGoods</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_KitchenBoost</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="RGK_SimpleResearchBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="neronix17.outland.core,">Outland_Bookshelf</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers,">RP_MechanicalCalculator</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers,">RP_DifferenceEngine</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers,">RP_TapeStorage</li>
                        <li MayRequire="solaris.furniturebase,">GL_Bookshelf</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeAA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBB</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBC</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeCA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeCB</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Misc_FileCabinet</li>
                        <li MayRequire="mlie.morefurniture,">Anon2FileCabinet</li>
                        <li MayRequire="vanillaexpanded.vfemedical,">Facility_ResearchCounter</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBA</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBB</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBC</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBD</li>
                        <li MayRequire="hol.rimputersforked,">RP_DifferenceEngine</li>
                        <li MayRequire="hol.rimputersforked,">RP_MechanicalCalculator</li>
                        <li MayRequire="hol.rimputersforked,">RP_TapeStorage</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">RP_MechanicalCalculator</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">RP_DifferenceEngine</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">Colony Tape Storage</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                        <li MayRequire="ninoss.rimservers,">SERVERS_MakeshiftServer</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="GL_FueledSmithy" or defName="GL_ElectricSmithy"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_Unobtainer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_III</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_III</li>
                        <li MayRequire="mlie.uncolony,">SadjuukShaper</li>
                        <li MayRequire="mlie.uncolony,">SadjuukGrinding</li>
                        <li MayRequire="mlie.uncolony,">SadjuukWeldingRobot</li>
                        <li MayRequire="mlie.uncolony,">SadjuukLathe</li>
                        <li MayRequire="mlie.uncolony,">SadjuukMilling</li>
                        <li MayRequire="mlie.uncolony,">SadjuukAssemblyRobot</li>
                        <li MayRequire="vanillaexpanded.vfeproduction,">VFE_SmithyCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_SmithingGoods</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_SmithingBoost</li>
                        <li MayRequire="elstrages.cyberneticstorm,">CS_ReAnalyser</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_toolbox</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_screwdrivers</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_hammer</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_aerosol</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_tongs</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_ballpeen</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_wrench</li>
                        <li MayRequire="twink.vaultfurniture,">vtcompter</li>
                        <li MayRequire="twink.vaultfurniture,">Vt_server</li>
                        <li MayRequire="arcjc007.wallstuff,">WallToolBoard</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Grindstone</li>
                        <li MayRequire="qx.astramilitarum,">ManCogitator</li>
                        <li MayRequire="mlie.tacticalchargedgear,">TCToolCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="GL_HandTailoringBench" or defName="GL_ElectricTailoringBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_Unobtainer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_III</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_III</li>
                        <li MayRequire="mlie.uncolony,">SadjuukShaper</li>
                        <li MayRequire="mlie.uncolony,">SadjuukGrinding</li>
                        <li MayRequire="mlie.uncolony,">SadjuukWeldingRobot</li>
                        <li MayRequire="mlie.uncolony,">SadjuukLathe</li>
                        <li MayRequire="mlie.uncolony,">SadjuukMilling</li>
                        <li MayRequire="mlie.uncolony,">SadjuukAssemblyRobot</li>
                        <li MayRequire="vanillaexpanded.vfeproduction,">VFE_TailorCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_TailorGoods</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_TailorBoost</li>
                        <li MayRequire="elstrages.cyberneticstorm,">CS_ReAnalyser</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_measure</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_scraps</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_textileroll</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_pencil</li>
                        <li MayRequire="twink.vaultfurniture,">vtcompter</li>
                        <li MayRequire="twink.vaultfurniture,">Vt_server</li>
                        <li MayRequire="arcjc007.wallstuff,">WallToolBoard</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Grindstone</li>
                        <li MayRequire="qx.astramilitarum,">ManCogitator</li>
                        <li MayRequire="mlie.tacticalchargedgear,">TCToolCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>