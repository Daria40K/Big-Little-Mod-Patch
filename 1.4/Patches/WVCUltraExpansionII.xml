<?xml version='1.0' encoding='utf-8'?>
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>WVC - Ultra Expansion II</li>
        </mods>
        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationConditional">
                    <xpath>Defs/ThingDef[defName="WVC_Ultra_GarbageRecyclerBench"][not(comps)]</xpath>
                    <match Class="PatchOperationAdd">
                        <xpath>Defs/ThingDef[defName="WVC_Ultra_GarbageRecyclerBench"]</xpath>
                        <value>
                            <comps>
                                <li Class="CompProperties_AffectedByFacilities">
                                    <linkableFacilities />
                                </li>
                            </comps>
                        </value>
                    </match>
                    <nomatch Class="PatchOperationConditional">
                        <xpath>Defs/ThingDef[defName="WVC_Ultra_GarbageRecyclerBench"]/comps[not(li[@Class="CompProperties_AffectedByFacilities"])]</xpath>
                        <match Class="PatchOperationAdd">
                            <xpath>Defs/ThingDef[defName="WVC_Ultra_GarbageRecyclerBench"]/comps</xpath>
                            <value>
                                <li Class="CompProperties_AffectedByFacilities">
                                    <linkableFacilities />
                                </li>
                            </value>
                        </match>
                    </nomatch>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[@Name="WVC_Ultra_WorkBenches_Implants"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Still</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Rotovape</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_TabletopCentrifuge</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_TabletopStove</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_TabletopLabTubeRack</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Centrifuge</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Incinerator</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_CNCMachine</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_RobotAssistant</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Spacer_Lathe</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_3DPrinter</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Lathe</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Vice</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_IndustrialOven</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_ConveyorBelt</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_Unobtainer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_III</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_III</li>
                        <li MayRequire="mlie.uncolony,">SadjuukShaper</li>
                        <li MayRequire="mlie.uncolony,">SadjuukGrinding</li>
                        <li MayRequire="mlie.uncolony,">SadjuukWeldingRobot</li>
                        <li MayRequire="mlie.uncolony,">SadjuukLathe</li>
                        <li MayRequire="mlie.uncolony,">SadjuukMilling</li>
                        <li MayRequire="mlie.uncolony,">SadjuukAssemblyRobot</li>
                        <li MayRequire="vat.epoeforked,">TableBionics</li>
                        <li MayRequire="vat.epoeforked,">TableBionics</li>
                        <li MayRequire="vat.epoeforked,">TableOrgans</li>
                        <li MayRequire="vat.epoeforked,">TableOrgans</li>
                        <li MayRequire="ludeon.rimworld,">ToolCabinet</li>
                        <li MayRequire="daylight.rlesexpansionproductps,">RLE_CMTCleaner</li>
                        <li MayRequire="daylight.rlesexpansionproductps,">RLE_IntegratedManagementDevice</li>
                        <li MayRequire="daylight.rlesexpansionproductps,">RLE_PowerStabilizer</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_FabricationBoost</li>
                        <li MayRequire="vanillaexpanded.vgeneticse,">GR_NutrientVat</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetC</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetA</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetB</li>
                        <li MayRequire="elstrages.cyberneticstorm,">CS_ReAnalyser</li>
                        <li MayRequire="sera.apinialienrace,">ApiniNectarStill</li>
                        <li MayRequire="sera.apinialienrace,">ApiniNectarStill</li>
                        <li MayRequire="sera.apinialienrace,">ApiniProstheticsTable</li>
                        <li MayRequire="sera.apinialienrace,">ApiniProstheticsTable</li>
                        <li MayRequire="sera.apinialienrace,">ApitechTable</li>
                        <li MayRequire="sera.apinialienrace,">ApitechTable</li>
                        <li MayRequire="sera.apinialienrace,">ApitechSynthesizer</li>
                        <li MayRequire="sera.apinialienrace,">ApitechSynthesizer</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_toolbox</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_screwdrivers</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_aerosol</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_blueprint</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_wrench</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_roboarm</li>
                        <li MayRequire="twink.vaultfurniture,">vtcompter</li>
                        <li MayRequire="twink.vaultfurniture,">Vt_server</li>
                        <li MayRequire="arcjc007.wallstuff,">WallToolBoard</li>
                        <li MayRequire="neronix17.outland.core,">Outland_BasicWorkbench</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Forge</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Grindstone</li>
                        <li MayRequire="akn.decorations,">AKN_MotivatingPlush</li>
                        <li MayRequire="scorpio.biotechnology,">Biotechnology_DNAHologram</li>
                        <li MayRequire="qx.astramilitarum,">ManCogitator</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_3DPrinter</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_Vice</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_IndustrialOven</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_ConveyorBelt</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_Incinerator</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_RobotAssistant</li>
                        <li MayRequire="mlie.tacticalchargedgear,">TCToolCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T2ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T3ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T4ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T5ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T6ToolCabinet</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="WVC_Ultra_GarbageRecyclerBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Incinerator</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_CNCMachine</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_RobotAssistant</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Spacer_Lathe</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_3DPrinter</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Lathe</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_Vice</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_IndustrialOven</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_ConveyorBelt</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables,">HobbesLink_LaserEngraver</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_Unobtainer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicDrawer_III</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_I</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_II</li>
                        <li MayRequire="explodoboy.snsambitioncosmic,">SNS_Linkable_CosmicCall_III</li>
                        <li MayRequire="mlie.uncolony,">SadjuukShaper</li>
                        <li MayRequire="mlie.uncolony,">SadjuukGrinding</li>
                        <li MayRequire="mlie.uncolony,">SadjuukWeldingRobot</li>
                        <li MayRequire="mlie.uncolony,">SadjuukLathe</li>
                        <li MayRequire="mlie.uncolony,">SadjuukMilling</li>
                        <li MayRequire="mlie.uncolony,">SadjuukAssemblyRobot</li>
                        <li MayRequire="ludeon.rimworld,">ToolCabinet</li>
                        <li MayRequire="daylight.rlesexpansionproductps,">RLE_IntegratedManagementDevice</li>
                        <li MayRequire="daylight.rlesexpansionproductps,">RLE_PowerStabilizer</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetC</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetA</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetB</li>
                        <li MayRequire="elstrages.cyberneticstorm,">CS_ReAnalyser</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_toolbox</li>
                        <li MayRequire="ucp.tabletopdecorations,">ucp_screwdrivers</li>
                        <li MayRequire="twink.vaultfurniture,">vtcompter</li>
                        <li MayRequire="twink.vaultfurniture,">Vt_server</li>
                        <li MayRequire="arcjc007.wallstuff,">WallToolBoard</li>
                        <li MayRequire="neronix17.outland.core,">Outland_BasicWorkbench</li>
                        <li MayRequire="neronix17.outland.core,">Outland_BasicWorkbench</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Forge</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Forge</li>
                        <li MayRequire="neronix17.outland.core,">Outland_Grindstone</li>
                        <li MayRequire="akn.decorations,">AKN_MotivatingPlush</li>
                        <li MayRequire="qx.astramilitarum,">ManCogitator</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_ConveyorBelt</li>
                        <li MayRequire="hobbes.bamba.evenmorelinkables16,">HobbesLink_RobotAssistant</li>
                        <li MayRequire="mlie.tacticalchargedgear,">TCToolCabinet</li>
                        <li MayRequire="daylight.wbsmorelinkf,">Link_UniversalCabinet</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T2ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T3ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T4ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T5ToolCabinet</li>
                        <li MayRequire="xion.moretoolboxes,">T6ToolCabinet</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>