<?xml version='1.0' encoding='utf-8'?>
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>[sx] Smaller Simple Research Bench</li>
        </mods>
        <match Class="PatchOperationSequence">
            <success>Always</success>
            <operations>
                <li Class="PatchOperationConditional">
                    <xpath>Defs/ThingDef[defName="SmallSimpleResearchBench"][not(comps)]</xpath>
                    <match Class="PatchOperationAdd">
                        <xpath>Defs/ThingDef[defName="SmallSimpleResearchBench"]</xpath>
                        <value>
                            <comps>
                                <li Class="CompProperties_AffectedByFacilities">
                                    <linkableFacilities />
                                </li>
                            </comps>
                        </value>
                    </match>
                    <nomatch Class="PatchOperationConditional">
                        <xpath>Defs/ThingDef[defName="SmallSimpleResearchBench"]/comps[not(li[@Class="CompProperties_AffectedByFacilities"])]</xpath>
                        <match Class="PatchOperationAdd">
                            <xpath>Defs/ThingDef[defName="SmallSimpleResearchBench"]/comps</xpath>
                            <value>
                                <li Class="CompProperties_AffectedByFacilities">
                                    <linkableFacilities />
                                </li>
                            </value>
                        </match>
                    </nomatch>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="SmallSimpleResearchBench"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                        <li MayRequire="solaris.furniturebase,">GL_Bookshelf</li>
                        <li MayRequire="zymex.hospitalsextended,">LabStation</li>
                        <li MayRequire="zymex.hospitalsextended,">LabTerminal</li>
                        <li MayRequire="gloomy.furniture.continued,">GL_Bookshelf</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeAA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBB</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeBC</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeCA</li>
                        <li MayRequire="mlie.uncolonyvanilla,">SadjuukResearchUpgradeCB</li>
                        <li MayRequire="vanillaexpanded.vfecore,">Misc_FileCabinet</li>
                        <li MayRequire="mlie.morefurniture,">Anon2FileCabinet</li>
                        <li MayRequire="vanillaexpanded.vfemedical,">Facility_ResearchCounter</li>
                        <li MayRequire="oskarpotocki.vfe.medieval2,">VFEM2_NotesStack</li>
                        <li MayRequire="oskarpotocki.vfe.medieval2,">VFEM2_ResearchBoard</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBA</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBB</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBC</li>
                        <li MayRequire="mlie.unfurniture,">SadjuukResearchBD</li>
                        <li MayRequire="reel.expanded.storage,">ReelStorageBookshelf</li>
                        <li MayRequire="4loris4.morelinkables,">ToolCabinetC</li>
                        <li MayRequire="ninedaylongbow.chinesecomprehensiveexpansion,">HX_ChineseBookshelf</li>
                        <li MayRequire="drenzyme.curiouscurios,">PotatoBattery</li>
                        <li MayRequire="drenzyme.curiouscurios,">HeartInAJar</li>
                        <li MayRequire="drenzyme.curiouscurios,">CC_RoyalJelly</li>
                        <li MayRequire="drenzyme.curiouscurios,">Thrumbone</li>
                        <li MayRequire="dankpyon.medieval.overhaul,">DankPyon_RoyalBookshelf</li>
                        <li MayRequire="dankpyon.medieval.overhaul,">DankPyon_RusticBookshelf</li>
                        <li MayRequire="dankpyon.medieval.overhaul,">DankPyon_RusticBookshelf1x2c</li>
                        <li MayRequire="neronix17.outland.furnitureanddecor,">Outland_StoneBookshelf</li>
                        <li MayRequire="neronix17.outland.furnitureanddecor,">Outland_Bookshelf</li>
                        <li MayRequire="akn.decorations,">AKN_WallPapersA</li>
                        <li MayRequire="akn.decorations,">AKN_WallPapersB</li>
                        <li MayRequire="akn.decorations,">AKN_PaperNotesA</li>
                        <li MayRequire="akn.decorations,">AKN_PaperNotesB</li>
                        <li MayRequire="akn.decorations,">AKN_PaperNotesC</li>
                        <li MayRequire="hol.rimputersforked,">RP_DifferenceEngine</li>
                        <li MayRequire="hol.rimputersforked,">RP_MechanicalCalculator</li>
                        <li MayRequire="hol.rimputersforked,">RP_TapeStorage</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">RP_MechanicalCalculator</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">RP_DifferenceEngine</li>
                        <li MayRequire="joeyjoejoeshabidoo.rimputers1.4,">Colony Tape Storage</li>
                        <li MayRequire="lyn.nto,">LYN_Nanocabinet</li>
                        <li MayRequire="ninoss.rimservers,">SERVERS_MakeshiftServer</li>
                        <li MayRequire="kongkim.researchdata,">ResearchSampleBench</li>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>